<!DOCTYPE html>
<html>
<head>
	<title>简单的demo</title>
	<style type="text/css">
		*{
			margin: 0 auto;
			padding: 0;
		}
		#baidu_map{
			width: 1000px;
			height: 700px;
		}
	</style>
</head>
<body>
	<div id="baidu_map"></div>

</body>
<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=RBMT4U5cY8KTuIXyXb0ENDuB"></script>
<script type="text/javascript">
	var map = new BMap.Map("baidu_map");
	map.centerAndZoom(new BMap.Point((116.125021+116.129702)/2, (38.708999+38.842078)/2), 13);
	map.enableScrollWheelZoom(true);

	var p = [], infoWindow = [];
	p.push(new BMap.Point(116.125021,38.708999));
	p.push(new BMap.Point(116.125053,38.723754));
	p.push(new BMap.Point(116.125541,38.728696));
	p.push(new BMap.Point(116.126367,38.740296));
	p.push(new BMap.Point(116.126664,38.745510));
	p.push(new BMap.Point(116.127038,38.751877));
	p.push(new BMap.Point(116.127146,38.764280));
	p.push(new BMap.Point(116.130496,38.793855));
	p.push(new BMap.Point(116.130592,38.809331));
	p.push(new BMap.Point(116.130240,38.831536));
	p.push(new BMap.Point(116.129702,38.842078));

	//var driving = new BMap.DrivingRoute(map, {renderOptions:{map: map, autoViewport: true}});
	//driving.search(p[0], p[p.length-1],{waypoints:p.slice(1,p.length-1)});
	var line = new BMap.Polyline(p);
	line.setStrokeColor("red");
	map.addOverlay(line);
	for(var i=0;i<11;i++) ~function(){
		var marker = new BMap.Marker(p[i]);
		map.addOverlay(marker);              // 将标注添加到地图中
		var opts = {
			width : 160,     // 信息窗口宽度
			height: 80,     // 信息窗口高度
			title : "途径地点"+i , // 信息窗口标题
			enableMessage:true,//设置允许信息窗发送短息
			message:"亲耐滴，晚上一起吃个饭吧？戳下面的链接看下地址喔~"
		}
//		infoWindow.push(new BMap.InfoWindow("当前时速：40km/h", opts));  // 创建信息窗口对象 
		var point = p[i];
		var speed = i*10;
		marker.addEventListener("click", function(){
//			openInfoWindow_BD(map,new BMap.InfoWindow("当前时速：40km/h", opts),p[i])
			map.openInfoWindow(new BMap.InfoWindow("当前时速："+speed+"km/h", opts),point); //开启信息窗口
		});

	}()
	

</script>
</html>